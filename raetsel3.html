<!DOCTYPE html>
    <html lang="de">
    <head>
      <meta charset="UTF-8" />
      <title>Snake-R√§tsel (L√§nge 20+)</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <style>
        body {
          min-height: 100vh;
          margin: 0;
          font-family: 'Quicksand', Arial, sans-serif;
          background: linear-gradient(135deg, #f8ffae 0%, #43c6ac 100%);
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: flex-start;
        }
        .container {
          background: #fff;
          border-radius: 18px;
          box-shadow: 0 4px 24px #0001, 0 1.5px 0 #43c6ac;
          padding: 38px 28px 28px 28px;
          margin-top: 48px;
          max-width: 600px;
          width: 95vw;
          display: flex;
          flex-direction: column;
          align-items: center;
        }
        h1 {
          font-size: 2rem;
          color: #222;
          letter-spacing: 1px;
          text-align: center;
          margin-bottom: 18px;
          text-shadow: 0 2px 12px #fff7, 0 1px 0 #fff;
        }
        .info {
          font-size: 1.1rem;
          margin: 18px 0 10px 0;
          color: #0a6b5c;
          text-align: center;
        }
        .ziel {
          color: #ffb347;
          font-weight: bold;
        }
        .gameover {
          color: #f44336;
          font-size: 1.2rem;
          font-weight: bold;
        }
        canvas {
          border: 3px solid #43c6ac;
          background: #000;
          border-radius: 12px;
          box-shadow: 0 2px 12px #43c6ac22;
          margin-bottom: 18px;
          margin-top: 8px;
          display: block;
        }
        #score {
          font-size: 1.1rem;
          color: #222;
          margin-bottom: 10px;
        }
        input[type="number"] {
          font-size: 1.1rem;
          padding: 12px;
          width: 120px;
          border: 2px solid #43c6ac;
          border-radius: 8px;
          outline: none;
          transition: border 0.2s;
          margin-right: 10px;
        }
        input[type="number"]:focus {
          border: 2px solid #ffb347;
        }
        button {
          font-size: 1.1rem;
          padding: 12px 24px;
          background: linear-gradient(90deg, #43c6ac 60%, #f8ffae 100%);
          color: #222;
          border: none;
          border-radius: 8px;
          font-weight: 600;
          cursor: pointer;
          box-shadow: 0 2px 8px #43c6ac22;
          transition: background 0.18s, color 0.18s;
          margin: 0 6px;
        }
        button:hover:not(:disabled) {
          background: linear-gradient(90deg, #f8ffae 60%, #43c6ac 100%);
          color: #0a6b5c;
        }
        button:disabled {
          background: #ccc;
          color: #888;
          cursor: not-allowed;
        }
        #ergebnis {
          font-size: 1.1rem;
          margin-top: 18px;
          padding: 15px;
          border-radius: 8px;
          width: 100%;
          text-align: center;
          min-height: 40px;
        }
        .richtig {
          background: #d4edda;
          color: #155724;
          border: 1px solid #c3e6cb;
        }
        .falsch {
          background: #f8d7da;
          color: #721c24;
          border: 1px solid #f5c6cb;
        }
        .nav-links {
          margin-top: 28px;
          text-align: center;
          width: 100%;
        }
        .nav-links a {
          color: #43c6ac;
          text-decoration: none;
          font-weight: bold;
          margin: 0 10px;
          transition: color 0.18s;
        }
        .nav-links a:hover {
          color: #ffb347;
        }
        @media (max-width: 700px) {
          .container { padding: 18px 4vw 18px 4vw; }
          canvas { width: 90vw !important; height: 90vw !important; max-width: 400px; max-height: 400px; }
        }
      </style>
      <link href="https://fonts.googleapis.com/css?family=Quicksand:400,700&display=swap" rel="stylesheet">
    </head>
    <body>
      <div class="container">
        <h1>üêç Snake-R√§tsel</h1>
        <div class="info">
          Steuere mit <b>WASD</b> &nbsp;|&nbsp; Erreiche L√§nge <span class="ziel" id="ziel">20</span><br>
          <span id="gameStatus">Game Over? Dr√ºcke RETRY!</span>
        </div>
        <canvas id="gameCanvas" width="400" height="400"></canvas>
        <div id="score">L√§nge: 1</div>
        <div>
          <button id="retryBtn" onclick="retryGame()" style="display:none;">üîÑ RETRY</button>
        </div>
        <div id="inputArea" style="display:none; margin-top:18px;">
          Gib die erscheinende Ziffer ein:<br>
          <input type="number" id="antwort" placeholder="Ziffer?" />
          <button onclick="pruefeAntwort()">Pr√ºfen</button>
        </div>
        <div id="ergebnis"></div>
        <div class="nav-links">
          <a href="index.html">‚Üê Zur√ºck zur Startseite</a> | <a href="finale.html">‚Üí Finalen Code eingeben</a>
        </div>
      </div>
      <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const grid = 20;
        let snake = [{x: 10, y: 10}];
        let food = {};
        let dx = 0, dy = 0;
        let score = 1;
        let gameRunning = true;
        const ZIELLAENGE = 20;

        function gameLoop() {
          if (!gameRunning) return;
          ctx.fillStyle = '#000';
          ctx.fillRect(0, 0, canvas.width, canvas.height);

          const head = {x: snake[0].x + dx, y: snake[0].y + dy};

          // Rand-Kollision
          if (head.x < 0 || head.x >= 20 || head.y < 0 || head.y >= 20) {
            gameOver();
            return;
          }
          // Selbst-Kollision
          if (snake.some((part, i) => i > 0 && part.x === head.x && part.y === head.y)) {
            gameOver();
            return;
          }
          snake.unshift(head);

          // Food essen
          if (head.x === food.x && head.y === food.y) {
            score++;
            document.getElementById('score').textContent = 'L√§nge: ' + score;
            newFood();
            if (score >= ZIELLAENGE) {
              gameRunning = false;
              showZiffer();
              return;
            }
          } else {
            snake.pop();
          }

          // Snake zeichnen
          ctx.fillStyle = '#43c6ac';
          snake.forEach((part, i) => {
            ctx.fillRect(part.x * grid, part.y * grid, grid-2, grid-2);
            if (i === 0) {
              ctx.fillStyle = '#0a6b5c';
              ctx.fillRect(part.x * grid + 2, part.y * grid + 2, grid-6, grid-6);
              ctx.fillStyle = '#43c6ac';
            }
          });

          // Food zeichnen
          ctx.fillStyle = '#ffb347';
          ctx.fillRect(food.x * grid, food.y * grid, grid-2, grid-2);
        }

        function gameOver() {
          gameRunning = false;
          ctx.fillStyle = '#f44336';
          ctx.font = 'bold 40px Arial';
          ctx.textAlign = 'center';
          ctx.fillText('GAME OVER', 200, 200);
          ctx.font = 'bold 28px Arial';
          ctx.fillStyle = '#222';
          ctx.fillText('Dr√ºcke RETRY!', 200, 240);

          document.getElementById('retryBtn').style.display = 'inline';
          document.getElementById('gameStatus').textContent = 'Game Over! Dr√ºcke RETRY!';
          document.getElementById('gameStatus').className = 'gameover';
        }

        function retryGame() {
          snake = [{x: 10, y: 10}];
          dx = 0; dy = 0;
          score = 1;
          gameRunning = true;
          document.getElementById('score').textContent = 'L√§nge: 1';
          document.getElementById('retryBtn').style.display = 'none';
          document.getElementById('inputArea').style.display = 'none';
          document.getElementById('gameStatus').textContent = 'Game Over? Dr√ºcke RETRY!';
          document.getElementById('gameStatus').className = 'info';
          document.getElementById('ziel').textContent = '20';
          document.getElementById('ergebnis').innerHTML = '';
          newFood();
        }

        function showZiffer() {
          ctx.fillStyle = '#43c6ac';
          ctx.font = 'bold 80px Arial';
          ctx.textAlign = 'center';
          ctx.fillText('6', 200, 220);
          ctx.font = 'bold 32px Arial';
          ctx.fillStyle = '#222';
          ctx.fillText('Ziel erreicht!', 200, 270);

          document.getElementById('inputArea').style.display = 'block';
          document.getElementById('ziel').textContent = '20 ‚úì';
        }

        function newFood() {
          food = {
            x: Math.floor(Math.random() * 20),
            y: Math.floor(Math.random() * 20)
          };
          if (snake.some(part => part.x === food.x && part.y === food.y)) {
            newFood();
          }
        }

        // Tastensteuerung
        document.addEventListener('keydown', e => {
          if (!gameRunning) return;
          if (e.key === 'w' && dy !== 1) { dx = 0; dy = -1; }
          if (e.key === 's' && dy !== -1) { dx = 0; dy = 1; }
          if (e.key === 'a' && dx !== 1) { dx = -1; dy = 0; }
          if (e.key === 'd' && dx !== -1) { dx = 1; dy = 0; }
        });

        // Spiel starten
        newFood();
        setInterval(gameLoop, 50);

        function pruefeAntwort() {
          const antwort = document.getElementById('antwort').value.trim();
          if (antwort === '6') {
            document.getElementById('ergebnis').innerHTML =
              '<div class="richtig">üéâ Perfekt! Ziffer 9 f√ºr den finalen Code ‚úÖ</div>';
          } else {
            document.getElementById('ergebnis').innerHTML =
              '<div class="falsch">‚ùå Falsch! Die Ziffer war 6.</div>';
          }
        }
      </script>
    </body>
    </html>