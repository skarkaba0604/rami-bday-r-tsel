<!DOCTYPE html>
                              <html lang="de">
                              <head>
                                <meta charset="UTF-8" />
                                <title>Capture-R√§tsel</title>
                                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                                <style>
                                  body {
                                    min-height: 100vh;
                                    margin: 0;
                                    font-family: 'Quicksand', Arial, sans-serif;
                                    background: linear-gradient(135deg, #f8ffae 0%, #43c6ac 100%);
                                    display: flex;
                                    flex-direction: column;
                                    align-items: center;
                                    justify-content: flex-start;
                                    color: #222;
                                  }
                                  .container {
                                    background: #fff;
                                    border-radius: 18px;
                                    box-shadow: 0 4px 24px #0001, 0 1.5px 0 #43c6ac;
                                    padding: 48px 38px 38px 38px;
                                    margin-top: 48px;
                                    max-width: 700px;
                                    width: 99vw;
                                    display: flex;
                                    flex-direction: column;
                                    align-items: center;
                                  }
                                  h1 {
                                    font-size: 2.3rem;
                                    color: #222;
                                    letter-spacing: 1px;
                                    text-align: center;
                                    margin-bottom: 22px;
                                    text-shadow: 0 2px 12px #fff7, 0 1px 0 #fff;
                                  }
                                  .desc {
                                    text-align: center;
                                    margin-bottom: 22px;
                                    font-size: 1.25rem;
                                  }
                                  .captcha-grid {
                                    display: grid;
                                    grid-template-columns: repeat(4, 1fr);
                                    grid-template-rows: repeat(4, 1fr);
                                    gap: 0;
                                    margin-bottom: 24px;
                                    background: #eee;
                                    border-radius: 0;
                                    box-shadow: 0 2px 12px #43c6ac22;
                                    position: relative;
                                    user-select: none;
                                    background-image: url('Bild2.jpeg');
                                    background-size: cover;
                                    background-position: center;
                                    width: 464px;
                                    height: 520px;
                                    overflow: hidden;
                                  }
                                  .captcha-tile {
                                    position: relative;
                                    width: 100%;
                                    height: 100%;
                                    border: 1px solid #222;
                                    padding: 0;
                                    background: none;
                                    cursor: pointer;
                                    outline: none;
                                    border-radius: 0;
                                    transition: box-shadow 0.15s, background 0.15s, border-color 0.15s;
                                    z-index: 2;
                                    opacity: 0.97;
                                    box-sizing: border-box;
                                  }
                                  .captcha-tile.selected {
                                    background: rgba(80,80,80,0.50);
                                    box-shadow: none;
                                    border-color: #222;
                                  }
                                  .captcha-tile.correct {
                                    background: rgba(67,198,172,0.25);
                                    box-shadow: 0 0 0 2px #43c6ac;
                                    border-color: #43c6ac;
                                  }
                                  #ergebnis {
                                    min-height: 40px;
                                    font-size: 1.2rem;
                                    margin-top: 14px;
                                    text-align: center;
                                  }
                                  .richtig {
                                    background: #d4edda;
                                    color: #155724;
                                    border: 1px solid #c3e6cb;
                                    border-radius: 8px;
                                    padding: 12px;
                                    display: inline-block;
                                    font-size: 1.2rem;
                                  }
                                  .falsch {
                                    background: #f8d7da;
                                    color: #721c24;
                                    border: 1px solid #f5c6cb;
                                    border-radius: 8px;
                                    padding: 12px;
                                    display: inline-block;
                                    font-size: 1.2rem;
                                  }
                                  #pruefenBtn {
                                    font-size: 1.1rem;
                                    padding: 12px 28px;
                                    background: linear-gradient(90deg, #43c6ac 60%, #f8ffae 100%);
                                    color: #222;
                                    border: none;
                                    border-radius: 8px;
                                    font-weight: 600;
                                    cursor: pointer;
                                    box-shadow: 0 2px 8px #43c6ac22;
                                    transition: background 0.18s, color 0.18s;
                                    margin-top: 10px;
                                    display: none;
                                  }
                                  #pruefenBtn:disabled {
                                    background: #ccc;
                                    color: #888;
                                    cursor: not-allowed;
                                  }
                                  .nav-links {
                                    margin-top: 32px;
                                    text-align: center;
                                    width: 100%;
                                  }
                                  .nav-links a {
                                    color: #43c6ac;
                                    text-decoration: none;
                                    font-weight: bold;
                                    margin: 0 12px;
                                    font-size: 1.1rem;
                                    transition: color 0.18s;
                                  }
                                  .nav-links a:hover {
                                    color: #ffb347;
                                  }
                                  @media (max-width: 900px) {
                                    .container { max-width: 99vw; }
                                    .captcha-grid {
                                      width: 92vw;
                                      height: 112vw;
                                      min-width: 0; min-height: 0;
                                    }
                                  }
                                  @media (max-width: 600px) {
                                    .container { padding: 18px 2vw 18px 2vw; }
                                    h1 { font-size: 1.3rem; }
                                    .desc { font-size: 1rem; }
                                    .captcha-grid {
                                      width: 92vw;
                                      height: 112vw;
                                    }
                                  }
                                </style>
                              </head>
                              <body>
                                <div class="container">
                                  <h1>üîç Capture-R√§tsel</h1>
                                  <div class="desc">Klicke alle Kacheln an, die auf deinem Dicksch√§del sind.<br>W√§hle und best√§tige dann deine L√∂sung!</div>
                                  <div class="captcha-grid" id="captchaGrid">
                                    <!-- Kacheln werden per JS generiert -->
                                  </div>
                                  <button id="pruefenBtn" onclick="pruefeLoesung()">L√∂sung pr√ºfen</button>
                                  <div id="ergebnis"></div>
                                  <div class="nav-links">
                                    <a href="index.html">‚Üê Zur√ºck zur Startseite</a> | <a href="finale.html">‚Üí Finalen Code eingeben</a>
                                  </div>
                                </div>
                                <script>
                                  // Richtige Kacheln (Index ab 1)
                                  const correctTiles = [2,3,4,6,7,8,10,11,12,14,15];
                                  const gridRows = 4, gridCols = 4;

                                  // Kacheln generieren
                                  const grid = document.getElementById('captchaGrid');
                                  for(let i=0; i<gridRows*gridCols; i++) {
                                    const btn = document.createElement('button');
                                    btn.className = 'captcha-tile';
                                    btn.dataset.idx = i+1;
                                    btn.onclick = function() {
                                      btn.classList.toggle('selected');
                                      document.getElementById('ergebnis').innerHTML = '';
                                      updatePruefenBtn();
                                      btn.classList.remove('correct');
                                    };
                                    grid.appendChild(btn);
                                  }

                                  function updatePruefenBtn() {
                                    const selected = document.querySelectorAll('.captcha-tile.selected').length;
                                    const pruefenBtn = document.getElementById('pruefenBtn');
                                    pruefenBtn.style.display = selected > 0 ? 'block' : 'none';
                                  }

                                  function pruefeLoesung() {
                                    const selected = Array.from(document.querySelectorAll('.captcha-tile.selected'))
                                      .map(btn => parseInt(btn.dataset.idx));
                                    let allCorrect = correctTiles.every(idx => selected.includes(idx));
                                    let noWrong = selected.every(idx => correctTiles.includes(idx));
                                    const result = document.getElementById('ergebnis');
                                    if(selected.length === correctTiles.length && allCorrect && noWrong) {
                                      // Nur bei richtiger L√∂sung gr√ºn markieren
                                      document.querySelectorAll('.captcha-tile').forEach(btn => {
                                        btn.classList.remove('correct');
                                        if(btn.classList.contains('selected') && correctTiles.includes(parseInt(btn.dataset.idx))) {
                                          btn.classList.add('correct');
                                        }
                                      });
                                      result.innerHTML = '<span class="richtig">üéâ Richtig! Die Ziffer f√ºr den finalen Code ist: <b>8</b> ‚úÖ</span>';
                                    } else {
                                      // Bei falscher L√∂sung alles zur√ºcksetzen
                                      document.querySelectorAll('.captcha-tile').forEach(btn => {
                                        btn.classList.remove('selected','correct');
                                      });
                                      result.innerHTML = '<span class="falsch">‚ùå Falsch! Du musst von vorne beginnen.</span>';
                                      updatePruefenBtn();
                                    }
                                  }
                                </script>
                              </body>
                              </html>